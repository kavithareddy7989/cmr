pipeline{
  agent any
  stages{
    stage("git checkout"){
      steps{
             git credentialsId: 'github', url: 'https://github.com/kavithareddy7989/cmr.git'
            }
           }
    stages("maven build"){
      steps{
           sh "mvn clean install"
            }
           }
    stage("building image"){
      steps{
         sh "docker build -t cmr-repo/myapp:1.0 ."
         sh "docker run -dt cmr-repo/mtapp:1.0 /bin/bash"
         sh "docker tag cmr-repo/myapp:1.0 kavithareddy7989/cmr:1.0"
         sh "docker push kavithareddy7989/cmr:1.0"
                 }
               }
             }
